# Claims System Architecture Diagram

## ğŸ¯ Complete System Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          LOST & FOUND CLAIMS SYSTEM                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   USER SUBMITS   â”‚
                            â”‚   CLAIM ON ITEM  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   ClaimForm.js Component         â”‚
                    â”‚  â€¢ Validates min 20 chars        â”‚
                    â”‚  â€¢ Shows item details            â”‚
                    â”‚  â€¢ Requires terms agreement      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   submitClaim() in Service       â”‚
                    â”‚   â€¢ Creates claim document       â”‚
                    â”‚   â€¢ Status = "pending"           â”‚
                    â”‚   â€¢ Timestamp and refs added     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        Firestore Database        â”‚
                    â”‚   claims/{claimId} created       â”‚
                    â”‚   with proper security           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   EMAIL SENT TO ITEM OWNER       â”‚
                    â”‚   "You have a new claim"         â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                                        â”‚
        â–¼                                                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ITEM OWNER REVIEWS     â”‚                        â”‚    OR ADMIN REVIEWS      â”‚
â”‚                          â”‚                        â”‚                          â”‚
â”‚ "My Claims" Tab          â”‚                        â”‚ Admin Claims Dashboard   â”‚
â”‚ â€¢ View claim details     â”‚                        â”‚ â€¢ See all claims         â”‚
â”‚ â€¢ See proof message      â”‚                        â”‚ â€¢ Statistics overview    â”‚
â”‚ â€¢ Approve/Reject         â”‚                        â”‚ â€¢ Search & filter        â”‚
â”‚ â€¢ Share contact          â”‚                        â”‚ â€¢ Approve/Reject/Resolve â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                                    â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                           â”‚
        â–¼                                           â–¼
   APPROVE                                      REJECT
        â”‚                                           â”‚
        â”œâ”€ Status â†’ "approved"                      â”œâ”€ Status â†’ "rejected"
        â”œâ”€ Email to claimant âœ…                     â”œâ”€ Email with reason âŒ
        â”œâ”€ WhatsApp notification                    â”œâ”€ WhatsApp notification
        â””â”€ Show "Share Contact" button              â””â”€ Allow resubmit
                  â”‚
                  â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ITEM OWNER SHARES CONTACT â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â€¢ Name                    â”‚
    â”‚  â€¢ Email                   â”‚
    â”‚  â€¢ Phone                   â”‚
    â”‚  â€¢ WhatsApp                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ EMAIL TO CLAIMANT          â”‚
    â”‚ â”œâ”€ Owner's contact info    â”‚
    â”‚ â”œâ”€ Item summary            â”‚
    â”‚ â””â”€ Safety reminder         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ BOTH PARTIES COORDINATE    â”‚
    â”‚ â”œâ”€ Schedule meetup         â”‚
    â”‚ â”œâ”€ Verify item             â”‚
    â”‚ â””â”€ Complete handover âœ…    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ADMIN MARKS RESOLVED       â”‚
    â”‚ â”œâ”€ Status â†’ "resolved"     â”‚
    â”‚ â”œâ”€ Optional notes          â”‚
    â”‚ â””â”€ Claim complete âœ…       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¦ Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          APPLICATION LAYER                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ItemDetail   â”‚  â”‚ MyClaims         â”‚  â”‚ AdminClaimsPage     â”‚  â”‚
â”‚  â”‚              â”‚  â”‚                  â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚ â”‚ClaimFormâ”‚  â”‚  â”‚ â”‚As Claimant   â”‚ â”‚  â”‚ â”‚Dashboard Stats â”‚ â”‚  â”‚
â”‚  â”‚ â”‚Componentâ”‚  â”‚  â”‚ â”‚Tab: Submittedâ”‚ â”‚  â”‚ â”‚â€¢ Pending       â”‚ â”‚  â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚â€¢ Approved      â”‚ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â”‚â€¢ Rejected      â”‚ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚                  â”‚  â”‚ â”‚â€¢ Resolved      â”‚ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â”‚As Item Owner â”‚ â”‚  â”‚                     â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â”‚Tab: Received â”‚ â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â”‚             â”‚ â”‚  â”‚ â”‚Table of Claims â”‚ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â”‚â€¢ Approve UI â”‚ â”‚  â”‚ â”‚â€¢ Search        â”‚ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â”‚â€¢ Reject UI  â”‚ â”‚  â”‚ â”‚â€¢ Filter        â”‚ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â”‚â€¢ Share form â”‚ â”‚  â”‚ â”‚â€¢ View/Approve  â”‚ â”‚  â”‚
â”‚  â”‚      â”‚       â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                    â”‚                       â”‚             â”‚
â”—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SERVICE & BUSINESS LOGIC LAYER                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚               â”‚   claimsService.js               â”‚                 â”‚
â”‚               â”‚                                  â”‚                 â”‚
â”‚               â”‚  â€¢ submitClaim()                 â”‚                 â”‚
â”‚               â”‚  â€¢ approveClaim()                â”‚                 â”‚
â”‚               â”‚  â€¢ rejectClaim()                 â”‚                 â”‚
â”‚               â”‚  â€¢ shareOwnerContact()           â”‚                 â”‚
â”‚               â”‚  â€¢ resolveClaim()                â”‚                 â”‚
â”‚               â”‚  â€¢ getClaimsFor*()               â”‚                 â”‚
â”‚               â”‚  â€¢ checkExistingClaim()          â”‚                 â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â”‚                                     â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚               â”‚   emailService.js                â”‚                 â”‚
â”‚               â”‚                                  â”‚                 â”‚
â”‚               â”‚  â€¢ generateApprovalEmailHTML()   â”‚                 â”‚
â”‚               â”‚  â€¢ generateRejectionEmailHTML()  â”‚                 â”‚
â”‚               â”‚  â€¢ generateContactSharingEmail() â”‚                 â”‚
â”‚               â”‚  â€¢ generateNewClaimEmail()       â”‚                 â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                              â”‚                                     â”‚
â”‚               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚               â”‚   whatsappNotifications.js       â”‚                 â”‚
â”‚               â”‚                                  â”‚                 â”‚
â”‚               â”‚  â€¢ sendApprovalNotification()    â”‚                 â”‚
â”‚               â”‚  â€¢ sendRejectionNotification()   â”‚                 â”‚
â”‚               â”‚  â€¢ generateMessage*()            â”‚                 â”‚
â”‚               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                     â”‚
â”—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FIREBASE LAYER (Secure)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚  Firestore Database                        â”‚              â”‚
â”‚         â”‚                                            â”‚              â”‚
â”‚         â”‚  Collection: claims                        â”‚              â”‚
â”‚         â”‚  â”œâ”€ Indexed on: claimantId, itemOwnerId  â”‚              â”‚
â”‚         â”‚  â”œâ”€ Indexed on: status, createdAt         â”‚              â”‚
â”‚         â”‚  â””â”€ ğŸ” Secure rules protect access        â”‚              â”‚
â”‚         â”‚                                            â”‚              â”‚
â”‚         â”‚  Document Example:                        â”‚              â”‚
â”‚         â”‚  {                                         â”‚              â”‚
â”‚         â”‚    claimantId: "user123"                  â”‚              â”‚
â”‚         â”‚    itemOwnerId: "user456"                 â”‚              â”‚
â”‚         â”‚    lostItemId: "lost789"                  â”‚              â”‚
â”‚         â”‚    status: "pending"                      â”‚              â”‚
â”‚         â”‚    claimMessage: "I have the receipt..."  â”‚              â”‚
â”‚         â”‚    createdAt: timestamp                   â”‚              â”‚
â”‚         â”‚    ...                                     â”‚              â”‚
â”‚         â”‚  }                                         â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                      â”‚
â”‚  ğŸ” Firestore Rules                                                 â”‚
â”‚  â”œâ”€ READ: Admins + Claimant + Item owner                           â”‚
â”‚  â”œâ”€ CREATE: Authenticated users (status=pending)                   â”‚
â”‚  â”œâ”€ UPDATE: Item owners (approve/reject) + Admins                  â”‚
â”‚  â””â”€ DELETE: Admins only                                             â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                                    â”‚
           â–¼                                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Email Service  â”‚             â”‚  WhatsApp Web    â”‚
    â”‚  (SMTP)         â”‚             â”‚  (Browser API)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
USER SUBMITS CLAIM
       â”‚
       â–¼
  ClaimForm.js
  â”œâ”€ Validates input
  â”œâ”€ Requires agreement
  â””â”€ Calls: submitClaim()
       â”‚
       â–¼
  submitClaim() in claimsService.js
  â”œâ”€ Prepares data
  â”œâ”€ Calls: addDoc(collection(db, 'claims'), {...})
  â””â”€ Returns: { success: true, claimId }
       â”‚
       â–¼
  Firestore Security Rules Check
  â”œâ”€ Verify: user is authenticated
  â”œâ”€ Verify: claimantId == currentUser.uid
  â”œâ”€ Verify: status == "pending"
  â””â”€ ALLOW if all checks pass
       â”‚
       â–¼
  Document Created in claims collection
  â””â”€ All fields stored with timestamps
       â”‚
       â–¼
  Component Receives Success
  â”œâ”€ Shows success message
  â””â”€ May trigger notifications (TODO)
       â”‚
       â–¼
  ITEM OWNER NOTIFIED
  â”œâ”€ Email sent (emailService)
  â””â”€ Optional: WhatsApp sent
```

---

## ğŸ¯ User Roles & Permissions Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Operation    â”‚  Claimantâ”‚Item Ownerâ”‚  Admin           â”‚ Other User â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ View own claimsâ”‚    âœ…    â”‚    âŒ    â”‚   âœ… (all)      â”‚    âŒ      â”‚
â”‚ View claims    â”‚          â”‚          â”‚                  â”‚            â”‚
â”‚  on own items  â”‚    âŒ    â”‚    âœ…    â”‚   âœ… (all)      â”‚    âŒ      â”‚
â”‚ Submit claim   â”‚    âœ…    â”‚   âœ…    â”‚   âœ…             â”‚    âŒ      â”‚
â”‚ Approve claim  â”‚    âŒ    â”‚    âœ…    â”‚   âœ…             â”‚    âŒ      â”‚
â”‚ Reject claim   â”‚    âŒ    â”‚    âœ…    â”‚   âœ…             â”‚    âŒ      â”‚
â”‚ Share contact  â”‚    âŒ    â”‚    âœ…    â”‚   âœ…             â”‚    âŒ      â”‚
â”‚ Resolve claim  â”‚    âŒ    â”‚    âŒ    â”‚   âœ…             â”‚    âŒ      â”‚
â”‚ Delete claim   â”‚    âŒ    â”‚    âŒ    â”‚   âœ…             â”‚    âŒ      â”‚
â”‚ Admin dashboardâ”‚    âŒ    â”‚    âŒ    â”‚   âœ…             â”‚    âŒ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ API Endpoints (Service Functions)

```
Claims Management Service (src/services/claimsService.js)
â”œâ”€ Submission
â”‚  â””â”€ submitClaim(claimData: object) â†’ {success, claimId}
â”‚
â”œâ”€ Retrieval
â”‚  â”œâ”€ getClaimsForLostItem(itemId: string) â†’ [claims]
â”‚  â”œâ”€ getClaimsForFoundItem(itemId: string) â†’ [claims]
â”‚  â”œâ”€ getUserClaimsAsClaimant(userId: string) â†’ [claims]
â”‚  â”œâ”€ getUserClaimsAsItemOwner(userId: string, type) â†’ [claims]
â”‚  â”œâ”€ getAllClaims() â†’ [claims] (admin only)
â”‚  â”œâ”€ getClaimDetails(claimId: string) â†’ claim
â”‚  â””â”€ getClaimWithItemDetails(claimId: string) â†’ claim + item
â”‚
â”œâ”€ Status Management
â”‚  â”œâ”€ approveClaim(claimId: string, contact?: object) â†’ {success}
â”‚  â”œâ”€ rejectClaim(claimId: string, reason?: string) â†’ {success}
â”‚  â”œâ”€ resolveClaim(claimId: string, notes?: string) â†’ {success}
â”‚  â””â”€ shareOwnerContact(claimId: string, contact: object) â†’ {success}
â”‚
â””â”€ Validation
   â””â”€ checkExistingClaim(userId, itemId, type) â†’ boolean
```

---

## ğŸ“Š Database Indexes (For Performance)

```
Indexes required in Firestore:

claims collection:
  â”œâ”€ Index 1:
  â”‚  â”œâ”€ claimantId (Ascending)
  â”‚  â”œâ”€ createdAt (Descending)
  â”‚
  â”œâ”€ Index 2:
  â”‚  â”œâ”€ itemOwnerId (Ascending)
  â”‚  â”œâ”€ createdAt (Descending)
  â”‚
  â”œâ”€ Index 3:
  â”‚  â”œâ”€ status (Ascending)
  â”‚  â”œâ”€ createdAt (Descending)
  â”‚
  â””â”€ Index 4:
     â”œâ”€ itemOwnerId (Ascending)
     â”œâ”€ itemType (Ascending)
     â”œâ”€ createdAt (Descending)
```

---

## ğŸ¨ UI Components Hierarchy

```
App.js (Router)
â”‚
â”œâ”€ Navbar.js
â”‚  â”œâ”€ Admin Claims Link (if admin)
â”‚  â””â”€ My Claims Link
â”‚
â”œâ”€ ItemDetail.js
â”‚  â””â”€ ClaimForm.js âœ¨ (modal)
â”‚
â”œâ”€ MyClaims.js âœ¨
â”‚  â”œâ”€ Tab: As Claimant
â”‚  â”‚  â””â”€ ClaimCard (display)
â”‚  â”‚
â”‚  â”œâ”€ Tab: As Item Owner
â”‚  â”‚  â””â”€ ClaimCard with Actions
â”‚  â”‚     â”œâ”€ ApproveButton
â”‚  â”‚     â”œâ”€ RejectButton (with reason dialog)
â”‚  â”‚     â””â”€ ShareContactButton (with form dialog)
â”‚  â”‚
â”‚  â””â”€ Details Dialog
â”‚
â””â”€ AdminClaimsPage.js âœ¨
   â”œâ”€ Statistics Cards (4)
   â”‚  â”œâ”€ Pending Count
   â”‚  â”œâ”€ Approved Count
   â”‚  â”œâ”€ Rejected Count
   â”‚  â””â”€ Resolved Count
   â”‚
   â”œâ”€ Filters
   â”‚  â”œâ”€ Search TextField
   â”‚  â””â”€ Status Select
   â”‚
   â”œâ”€ Claims Table
   â”‚  â””â”€ View Buttons
   â”‚
   â”œâ”€ Details Dialog
   â”‚  â””â”€ Action Buttons
   â”‚
   â””â”€ Resolve Dialog
      â””â”€ Notes TextField
```

This comprehensive diagram shows the entire system architecture and how all components interact!
